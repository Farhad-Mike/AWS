############################# GETTING STARTED WITH AWS #############################


https://infrastructure.aws/
https://aws.amazon.com/about-aws/global-infrastructure/regional-product-services
• AWS Regions
    AWS has Regions all around the world
    Names can be us-east-1, eu-west-3...
    A region is a cluster of data centers
    Most AWS services are region-scoped
• AWS Availability Zones
    Each region has many availability zones (usually 3, min is 3, max is 6). Example:
      ap-southeast-2a
      ap-southeast-2b
      ap-southeast-2c
    Each availability zone (AZ) is one or more discrete data centers with redundant power, networking, and connectivity
    They’re separate from each other, so that they’re isolated from disasters
    They’re connected with high bandwidth, ultra-low latency networking
• AWS Data Centers
• AWS Edge Locations / Points of Presence

How to choose an AWS Region?:
  • Compliance with data governance and legal requirements: data never leaves a region without your explicit permission
  • Proximity to customers: reduced latency
  • Available services within a Region: new services and new features aren’t available in every Region
  • Pricing: pricing varies region to region and is transparent in the service pricing page

• AWS has Global Services:
    Identity and Access Management (IAM)
    Route 53 (DNS service)
    CloudFront (Content Delivery Network)
    WAF (Web Application Firewall)
• Most AWS services are Region-scoped:
    Amazon EC2 (Infrastructure as a Service)
    Elastic Beanstalk (Platform as a Service)
    Lambda (Function as a Service)
    Rekognition (Software as a Service)





############################# IAM & AWS CLI #############################


IAM: Users & Groups
  IAM = Identity and Access Management, Global service
  Root account created by default, shouldn’t be used or shared
  Users are people within your organization, and can be grouped
  Groups only contain users, not other groups
  Users don’t have to belong to a group, and user can belong to multiple groups

IAM: Permissions
  Users or Groups can be assigned JSON documents called policies
  These policies define the permissions of the users
  In AWS you apply the least privilege principle: don’t give more permissions than a user needs


IAM Policies Structure:

• Consists of:
    Version: policy language version, always include “2012-10-17”
    Id: an identifier for the policy (optional)
    Statement: one or more individual statements (required)
• Statements consists of:
    Sid: an identifier for the statement (optional)
    Effect: whether the statement allows or denies access (Allow, Deny)
    Principal: account/user/role to which this policy applied to
    Action: list of actions this policy allows or denies
    Resource: list of resources to which the actions applied to
    Condition: conditions for when this policy is in effect (optional)


>>aws configure         # Configure AWS CLI for connect to AWS
>>aws iam list-users    # List all users in AWS Cloud
                  --region <region>


EC2 Instance  # Virtual Service





############################# EC2 Fundamentals #############################


EC2 is one of the most popular of AWS offering
EC2 = Elastic Compute Cloud = Infrastructure as a Service
It mainly consists in the capability of:
  Renting virtual machines (EC2)
  Storing data on virtual drives (EBS)
  Distributing load across machines (ELB)
  Scaling the services using an auto-scaling group (ASG)

EC2 sizing & configuration options:
  Operation System: Linux, Windows, Mac
  How much compute power & cores (CPU)
  How much RAM memory
  How much storage space:
    Network-attached (EBS & EFS)
    hardware (EC2 Instance Store)
  Network card: speed of the card, Public IP
  Firewall rules: security group
  Bootstrap script (confgure at first launch): EC2 User Data


Everytime you stop/start instance (VM) in EC2 the public IP maybe change

You can use different instance types optimized for different purposes: https://aws.amazon.com/ec2/instance-types
AWS has the following naming convention:
  Example: m5.2xlarge:
            m: instance class
            5: generation (AWS improves them over time)
            2xlarge: size within the instance class

There is 3 well known EC2 Instance Types:
  Compute optimized
  Memory optimized
  Storage optimized


Security Groups:
  Acting as a "firewall" on EC2 Instances
  Can be attached to multiple instances
  Locked down to a region / VPC combination
  Doest live "outside" the EC2 - if traffic is blocked the EC2 instance won't see it 
  It's good to maintain one separate security group for SSH access
  If your application is not accessible (time out), then it is a security group issue 
  If your applicatin gives a "connection refused" error, then it is an application error or it is not launched
  All inbound traffic is blocked by default
  All outbound traffic is authorised by default


NOTE: never! write access key or ID in "aws configure"


EC2 Instances Purchasing Options:
  On-Demand Instances – short workload, predictable pricing, pay by second
  Reserved (1 & 3 years):
    Reserved Instances – long workloads
    Conver tible Reserved Instances – long workloads with flexible instances
  Savings Plans (1 & 3 years) –commitment to an amount of usage, long workload
  Spot Instances – short workloads, cheap, can lose instances (less reliable)
  Dedicated Hosts – book an entire physical server, control instance placement
  Dedicated Instances – no other customers will share your hardware
  Capacity Reservations – reserve capacity in a specific AZ for any duration